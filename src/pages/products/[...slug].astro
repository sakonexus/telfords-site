---
import MainLayout from '@layouts/MainLayout.astro'
import ProductContent from '@components/ProductContent';
import { getImage } from 'astro:assets';

import pipeImage1 from '@assets/products/pipes/castello-radice-pipes.jpg';
import pipeImage2 from '@assets/products/pipes/fancy-pipe-1.jpg';
import pipeImage3 from '@assets/products/pipes/perterson-pipes.jpg';
import pipeImage4 from '@assets/products/pipes/savinelli-pipes.jpg';
import pipeImage5 from '@assets/products/pipes/trad-pipes-1.jpg';
import pipeImage6 from '@assets/products/pipes/trad-pipes-2.jpg';
import pipeImage7 from '@assets/products/pipes/wall-of-pipes-1.jpg';
import pipeImage8 from '@assets/products/pipes/wall-of-pipes-2.jpg';

import cigarImage1 from '@assets/products/cigars/cigars-1.jpg';
import cigarImage2 from '@assets/products/cigars/cigars-2.jpg';
import cigarImage3 from '@assets/products/cigars/cigars-3.jpg';
import cigarImage4 from '@assets/products/cigars/davidoff-case.jpg';
import cigarImage5 from '@assets/products/cigars/davidoff-royal.jpg';
import cigarImage6 from '@assets/products/cigars/wall-of-cigars-1.jpg';

import tobaccoImage1 from '@assets/products/tobacco/cigerette-wall-1.jpg';
import tobaccoImage2 from '@assets/products/tobacco/cigerette-wall-2.jpg';
import tobaccoImage3 from '@assets/products/tobacco/pipe-tobacco-1.jpg';
import tobaccoImage4 from '@assets/products/tobacco/pipe-tobacco-2.jpg';

import accessoryImage1 from '@assets/products/accessories/torches-1.jpg';
import accessoryImage2 from '@assets/products/accessories/torches-2.jpg';
import accessoryImage3 from '@assets/products/accessories/torches-3.jpg';
import accessoryImage4 from '@assets/products/accessories/humidor-wall-1.jpg';
import accessoryImage5 from '@assets/products/accessories/pyrimid-humidor.jpg';
import accessoryImage6 from '@assets/products/accessories/humidor-with-gauge.jpg';
import accessoryImage7 from '@assets/products/accessories/cutters-1.jpg';
import accessoryImage8 from '@assets/products/accessories/cutters-2.jpg';
import accessoryImage9 from '@assets/products/accessories/torches-4.jpg';
import accessoryImage10 from '@assets/products/accessories/torches-5.jpg';


export async function getStaticPaths() {
  const pipeImages = [
    { id: 1, src: pipeImage1, alt: 'Castello and Radice pipes' },
    { id: 2, src: pipeImage2, alt: 'Fancy pipe' },
    { id: 3, src: pipeImage3, alt: 'Peterson pipes' },
    { id: 4, src: pipeImage4, alt: 'Savinelli pipes' },
    { id: 5, src: pipeImage5, alt: 'Traditional pipes' },
    { id: 6, src: pipeImage6, alt: 'Traditional pipes' },
    { id: 7, src: pipeImage7, alt: 'Wall of pipes' },
    { id: 8, src: pipeImage8, alt: 'Wall of pipes' },
  ];

  const cigarImages = [
    {
      id: 1,
      src: cigarImage1,
      alt: 'Cigars',
    },
    {
      id: 2,
      src: cigarImage2,
      alt: 'Cigars',
    },
    {
      id: 3,
      src: cigarImage3,
      alt: 'Cigars',
    },
    {
      id: 4,
      src: cigarImage4,
      alt: 'Davidoff cigars',
    },
    {
      id: 5,
      src: cigarImage5,
      alt: 'Davidoff Royal cigars',
    },
    {
      id: 6,
      src: cigarImage6,
      alt: 'Wall of cigars',
    },
  ];

  const tobaccoImages = [
    {
      id: 1,
      src: tobaccoImage1,
      alt: 'Cigerettes',
    },
    {
      id: 2,
      src: tobaccoImage2,
      alt: 'Cigerettes',
    },
    {
      id: 3,
      src: tobaccoImage3,
      alt: 'Pipe tobacco',
    },
    {
      id: 4,
      src: tobaccoImage4,
      alt: 'Pipe tobacco',
    },
  ];

  const accessoryImages = [
    {
      id: 1,
      src: accessoryImage1,
      alt: 'Lighters',
    },
    {
      id: 2,
      src: accessoryImage2,
      alt: 'Lighters',
    },
    {
      id: 3,
      src: accessoryImage3,
      alt: 'Lighters',
    },
    {
      id: 4,
      src: accessoryImage4,
      alt: 'Wall of humidors',
    },
    {
      id: 5,
      src: accessoryImage5,
      alt: 'Pyrimid humidor',
    },
    {
      id: 6,
      src: accessoryImage6,
      alt: 'Humidor with gauge',
    },
    {
      id: 7,
      src: accessoryImage7,
      alt: 'Cigar cutters',
    },
    {
      id: 8,
      src: accessoryImage8,
      alt: 'Cigar cutters',
    },
    {
      id: 9,
      src: accessoryImage9,
      alt: 'Lighters',
    },
    {
      id: 10,
      src: accessoryImage10,
      alt: 'Lighters',
    },
  ];

    const productPages = [
    {
      slug: 'pipes',
      title: 'Pipes',
      text: 'Elevate your smoking experience with our curated selection of premium pipes. From classic designs to bold, modern styles, each piece is crafted to perfection, blending artistry, comfort, and tradition. Whether you’re a seasoned connoisseur or just beginning your journey, our diverse collection offers a pipe to suit every taste and occasion.',
      galleryImages: pipeImages,
    },
    {
      slug: 'cigars',
      title: 'Cigars',
      text: 'Experience the rich, nuanced flavors of our carefully curated cigar collection. From rare, hand-rolled classics to bold modern blends, each cigar embodies craftsmanship, tradition, and sophistication. Explore California’s largest selection and discover the perfect cigar to elevate any moment. Every cigar in our collection is chosen for its exceptional quality, offering a truly unparalleled smoking experience.',
      galleryImages: cigarImages,
    },
    {
      slug: 'tobacco',
      title: 'Tobacco',
      text: 'We offer only the highest quality cigarettes, pipe tobacco, and related tobacco products, carefully selected for discerning tastes. Each product in our collection reflects craftsmanship and consistency, ensuring a superior smoking experience every time. Explore a range that combines tradition, quality, and sophistication.',
      galleryImages: tobaccoImages,
    },
    {
      slug: 'accessories',
      title: 'Accessories',
      text: 'Complement your smoking experience with our curated selection of premium accessories. From elegant humidors and precision cutters to handcrafted lighters and stylish cases, each piece is designed for both function and sophistication. Discover tools that enhance every ritual and reflect the art of fine tobacco.',
      galleryImages: accessoryImages,
    },
  ]

  const optimizedProductPages = await Promise.all(
    productPages.map(async (page) => {
      const optimizedGallery = await Promise.all(
        page.galleryImages.map(async (item) => {
          const optimized = await getImage({ src: item.src, format: 'webp' });
          return { ...item, src: optimized.src };
        })
      );
      return { ...page, galleryImages: optimizedGallery };
    })
  );

  return optimizedProductPages.map(({ slug, title, text, galleryImages }) => ({
    params: { slug },
    props: { title, text, galleryImages },
  }));
}

const { title, text, galleryImages } = Astro.props;
---
<MainLayout>
  <ProductContent title={title} text={text} galleryImages={galleryImages} client:load />
</MainLayout>