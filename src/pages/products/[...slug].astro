---
import PageLayout from '@layouts/PageLayout.astro';
import ProductContent from '@components/ProductContent';
import { getImage } from 'astro:assets';

import pipeImage1 from '@assets/products/pipes/castello-radice-pipes.jpg';
import pipeImage2 from '@assets/products/pipes/fancy-pipe-1.jpg';
import pipeImage3 from '@assets/products/pipes/perterson-pipes.jpg';
import pipeImage4 from '@assets/products/pipes/savinelli-pipes.jpg';
import pipeImage5 from '@assets/products/pipes/trad-pipes-1.jpg';
import pipeImage6 from '@assets/products/pipes/trad-pipes-2.jpg';
import pipeImage7 from '@assets/products/pipes/wall-of-pipes-1.jpg';
import pipeImage8 from '@assets/products/pipes/wall-of-pipes-2.jpg';

import cigarImage1 from '@assets/products/cigars/cigars-1.jpg';
import cigarImage2 from '@assets/products/cigars/cigars-2.jpg';
import cigarImage3 from '@assets/products/cigars/cigars-3.jpg';
import cigarImage4 from '@assets/products/cigars/davidoff-case.jpg';
import cigarImage5 from '@assets/products/cigars/davidoff-royal.jpg';
import cigarImage6 from '@assets/products/cigars/wall-of-cigars-1.jpg';

import tobaccoImage1 from '@assets/products/tobacco/cigerette-wall-1.jpg';
import tobaccoImage2 from '@assets/products/tobacco/cigerette-wall-2.jpg';
import tobaccoImage3 from '@assets/products/tobacco/pipe-tobacco-1.jpg';
import tobaccoImage4 from '@assets/products/tobacco/pipe-tobacco-2.jpg';

import accessoryImage1 from '@assets/products/accessories/torches-1.jpg';
import accessoryImage2 from '@assets/products/accessories/torches-2.jpg';
import accessoryImage3 from '@assets/products/accessories/torches-3.jpg';
import accessoryImage4 from '@assets/products/accessories/humidor-wall-1.jpg';
import accessoryImage5 from '@assets/products/accessories/pyrimid-humidor.jpg';
import accessoryImage6 from '@assets/products/accessories/humidor-with-gauge.jpg';
import accessoryImage7 from '@assets/products/accessories/cutters-1.jpg';
import accessoryImage8 from '@assets/products/accessories/cutters-2.jpg';
import accessoryImage9 from '@assets/products/accessories/torches-4.jpg';
import accessoryImage10 from '@assets/products/accessories/torches-5.jpg';

const productPages = [
  {
    slug: 'pipes',
    title: 'Pipes',
    text: 'Elevate your smoking experience with our selection of premium pipes. From classic designs to bold, modern styles, each piece is crafted to perfection, blending artistry, comfort, and tradition. Whether you’re a seasoned connoisseur or just beginning your journey, our diverse collection offers a pipe to suit every taste and occasion.',
    galleryImages: [
      pipeImage1, pipeImage2, pipeImage3, pipeImage4,
      pipeImage5, pipeImage6, pipeImage7, pipeImage8,
    ],
  },
  {
    slug: 'cigars',
    title: 'Cigars',
    text: 'Experience the rich flavors of our carefully chosen cigar collection. From rare, hand-rolled classics to bold modern blends, each cigar embodies craftsmanship, tradition, and class. Explore California’s largest selection and discover the perfect cigar to elevate any moment. Every cigar in our collection is chosen for its exceptional quality, offering a truly unparalleled smoking experience.',
    galleryImages: [
      cigarImage1, cigarImage2, cigarImage3, cigarImage4, cigarImage5, cigarImage6
    ],
  },
  {
    slug: 'tobacco',
    title: 'Tobacco',
    text: 'We offer only the highest quality cigarettes, pipe tobacco, and related tobacco products, carefully selected for discerning tastes. Each product in our collection reflects craftsmanship and consistency, ensuring a superior smoking experience every time. Explore a range that combines tradition, quality, and elegance.',
    galleryImages: [
      tobaccoImage1, tobaccoImage2, tobaccoImage3, tobaccoImage4
    ],
  },
  {
    slug: 'accessories',
    title: 'Accessories',
    text: 'Complement your smoking experience with our wide selection of premium accessories. From elegant humidors and precision cutters to exquisite lighters and stylish cases, each piece is designed for both function and style. Discover tools that enhance every ritual and reflect the art of fine tobacco.',
    galleryImages: [
      accessoryImage1, accessoryImage2, accessoryImage3, accessoryImage4,
      accessoryImage5, accessoryImage6, accessoryImage7, accessoryImage8,
      accessoryImage9, accessoryImage10
    ],
  },
];

const { slug } = Astro.params;

const pageData = productPages.find(p => p.slug === slug);

if (!pageData) {
  throw new Error(`No product page found for slug: ${slug}`);
}

const galleryImages = await Promise.all(
  pageData.galleryImages.map(async (img, index) => {
    const optimized = await getImage({ src: img, format: 'webp' });
    return { src: optimized.src, alt: pageData.slug+'-'+index };
  })
);
---
<PageLayout>
  <ProductContent title={pageData.title} text={pageData.text} galleryImages={galleryImages} client:load />
</PageLayout>